"use strict";var verify_wxp=function(){function e(e,t,s){for(var i in this._testHook={is_email:function(e){return this.regexs.email.test(this.backVal(e))},is_ip:function(e){return this.regexs.ip.test(this.backVal(e))},is_fax:function(e){return this.regexs.fax.test(this.backVal(e))},is_tel:function(e){return this.regexs.fax.test(this.backVal(e))},is_phone:function(e){return this.regexs.phone.test(this.backVal(e))},is_url:function(e){return this.regexs.url.test(this.backVal(e))},is_money:function(e){return this.regexs.money.test(this.backVal(e))},is_english:function(e){return this.regexs.english.test(this.backVal(e))},is_chinese:function(e){return this.regexs.chinese.test(this.backVal(e))},is_percent:function(e){return this.regexs.percent.test(this.backVal(e))},is_id:function(e){return this.regexs.id.test(this.backVal(e))},required:function(e){var t=this.backVal(e);return"checkbox"===e.type||"radio"===e.type?!0===e.checked:null!==t&&""!==t},max_length:function(e,t){return!!this.regexs.numericRegex.test(t)&&this.backVal(e).length<=parseInt(t,10)},min_length:function(e,t){return!!this.regexs.numericRegex.test(t)&&this.backVal(e).length>=parseInt(t,10)},same:function(e,t){return this.backVal(e)==this.backVal(t)},different:function(e,t){return!this.same(e,t)},contains:function(e,t){return this.backVal(e)==t},accepted:function(e){var t=this.backVal(e);return"YES"==t.toUpperCase()||"ON"==t.toUpperCase()||1==t||0==t}},this.regexs={rule:/^(.+?)\((.+)\)$/,numericRegex:/^[0-9]+$/,email:/^[a-zA-Z0-9]+([._\\-]*[a-zA-Z0-9])*@([a-zA-Z0-9]+[-a-zA-Z0-9]*[a-zA-Z0-9]+.){1,63}[a-zA-Z0-9]+$/,ip:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])((\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}|(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){5})$/,fax:/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/,phone:/^1[0-9]{10}$/,url:/[a-zA-z]+:\/\/[^\s]/,money:/^(0|[1-9]\d*)(\.\d+)?$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,percent:/^(?:[1-9][0-9]?|100)(?:\.[0-9]{1,2})?$/,id:/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}$)/},this._testHook)this[this.camelCase(i)]=this._testHook[i];if(this.callback=s||function(){},this.errors=[],this.fields={},this.handles={},e){this.form=this._formElm(e)||{};for(var r=0,n=t.length;r<n;r++){var a=t[r];(a.name||a.names)&&a.rules?this.addField(this,a,a.name):console.warn(a)}var l,o=this.form.onsubmit;this.form.onsubmit=(l=this,function(e){try{return l.validate(e)&&(void 0===o||o())}catch(e){console.log(e)}})}}return e.prototype.validate=function(e){if(this._passes)return this;for(var t in this.handles.ok=!0,this.handles.evt=e,this.errors=[],this.fields)if(this.fields.hasOwnProperty(t)){var s=this.fields[t]||{},i=this.form[s.name];i&&void 0!==i&&(s.id=this.attributeValue(i,"id"),s.element=i,s.type=0<i.length?i[0].type:i.type,s.value=this.attributeValue(i,"value"),s.checked=this.attributeValue(i,"checked"),this._validateField(s))}return"function"==typeof this.callback&&this.callback(this,e),0<this.errors.length&&(e&&e.preventDefault?e.preventDefault():event&&(event.returnValue=!1)),this},e.prototype.passes=function(){this._passes=!0},e.prototype._validateField=function(h){for(var c=h.rules.split("|"),d=!h.value||""===h.value||void 0===h.value,e=function(e,t){var s=c[e],i=f.regexs.rule.exec(s),r=null,n=!1;if(i&&(s=i[1],r=i[2]),d&&-1===c.indexOf("required"))return"continue";if("function"==typeof f._testHook[s]&&(f._testHook[s].apply(f,[h,r])||(n=!0)),f.regexs[s]&&/^regexp\_/.test(s)&&(f.regexs[s].test(h.value)||(n=!0)),n){var a=h.display.split("|")[e]&&h.display.split("|")[e].replace("{{"+h.name+"}}",h.value),l=void 0,o=void 0;for(o=0;o<f.errors.length;o+=1)h.element===f.errors[o].element&&(l=f.errors[o]);var u=l||{id:h.id,display:h.display,element:h.element,name:h.name,message:a,messages:[],rule:s};u.messages.push(a),l||f.errors.push(u)}},f=this,t=0,s=c.length;t<s;t++)e(t);return this},e.prototype.addField=function(e,t,s){for(var i in e.fields[s]={name:s,display:t.display||s,rules:t.rules,id:null,element:null,type:null,value:null,checked:null},t)t.hasOwnProperty(i)&&/^regexp\_/.test(i)&&(this.regexs[i]=t[i])},e.prototype._formElm=function(e){return"object"==typeof e?e:document.forms[e]},e.prototype.backVal=function(e){return"string"==typeof e?e:e.value},e.prototype.camelCase=function(e){return e.replace(/\_([a-z])/g,function(e,t){return t.toUpperCase()})},e.prototype.attributeValue=function(e,t){var s,i;if(!(0<e.length)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[t];for(s=0,i=e.length;s<i;s++)if(e[s].checked)return e[s][t]},e}();